sudo: required
dist: trusty
language: python
python:
- '2.7'
branches:
  only:
  - master
addons:
  apt:
    packages:
    - language-pack-en
    - language-pack-zh-hant
    - language-pack-th
install:
- pip install -r requirements.txt
- make download
script:
- make publish
after_success:
- git config --global user.email "travis@travis-ci.org"
- git config --global user.name "Travis"
- git config --global push.default simple
- echo "Clone USERNAME.github.io..."
- git clone --depth 1 https://${GH_TOKEN}@github.com/USERNAME/USERNAME.github.io.git > /dev/null
- cd USERNAME.github.io
- git rm -rf * > /dev/null
- cp -r  ../output/* .
- git add .
- git status
- git commit -m "Pushed by Travis CI"
- git push --quiet
env:
  global:
    secure: YOUR_ENCRYPTED_TOKEN
